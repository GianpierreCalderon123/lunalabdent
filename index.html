<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>LunaLab Dent ‚Äî La sonrisa de Mateo</title>
<style>
    :root {
        --fs-h1: clamp(20px, 4vw, 32px);
        --fs-text: clamp(14px, 2.5vw, 20px);
        --fs-button: clamp(14px, 2.5vw, 20px);
        --fs-small: clamp(12px, 2vw, 16px);
    }

    body {
        background: #0c1226;
        font-family: 'Verdana', sans-serif;
        color: #ffffff;
        margin: 0;
        overflow: hidden;
    }

    #screen {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: clamp(10px, 3vw, 40px);
    }

    .view {
        display: none;
        width: 100%;
        height: 100%;
    }
    .active-view {
        display: flex;
    }

    .centered-column {
        margin: auto;
        max-width: 900px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .big-text {
        font-size: var(--fs-text);
        line-height: 1.5;
        max-width: 800px;
    }

    #introTitle {
        font-size: var(--fs-h1);
        margin-bottom: 18px;
    }

    .btn {
        background: #00b7ff;
        border: none;
        border-radius: 14px;
        font-size: var(--fs-button);
        padding: 12px 22px;
        color: white;
        margin-top: 22px;
        cursor: pointer;
        transition: transform 0.2s ease;
        box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }
    .btn:hover {
        transform: scale(1.05);
    }

    #mateoImg {
        width: clamp(180px, 35vw, 260px);
        border-radius: 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.6);
        margin-bottom: 20px;
    }

    /* JUEGO */
    #whiteningGame h2 {
        font-size: var(--fs-h1);
    }
    #whiteningGame p {
        font-size: var(--fs-small);
    }

    .tooth-card {
        background: #141b36;
        border-radius: 18px;
        padding: 10px 16px;
        width: clamp(100px, 22vw, 130px);
        min-height: clamp(135px, 28vw, 170px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        box-shadow: 0 8px 20px rgba(0,0,0,0.45);
        transition: transform 0.15s ease;
    }

    .tooth-emoji {
        font-size: clamp(36px, 6vw, 48px);
    }
    .tooth-status {
        font-size: var(--fs-small);
    }
    .tooth-level {
        font-size: var(--fs-small);
    }

    #progressText {
        margin-top: 18px;
        font-size: var(--fs-button);
    }

    #warningText {
        margin-top: 8px;
        font-size: var(--fs-small);
        color: #ff7675;
        display: none;
    }
</style>
</head>
<body>

<div id="screen">

    <!-- intro -->
    <div id="introView" class="view active-view">
        <div class="centered-column">
            <h1 id="introTitle">¬øQuieres saber la historia de Mateo?</h1>
            <img id="mateoImg" src="img123.jpg">
            <button class="btn" onclick="goToStory()">S√≠, quiero saberla üëâ</button>
        </div>
    </div>

    <!-- historia -->
    <div id="storyView" class="view">
        <div class="centered-column big-text">
            Hab√≠a una vez un ni√±o de 12 a√±os llamado <b>Mateo</b>, muy t√≠mido.<br><br>
            Siempre se tapaba la boca al sonre√≠r‚Ä¶ porque sus dientes ten√≠an manchas amarillas.<br><br>
            Pero este a√±o era especial:<br>
            <b>la cena de Navidad</b> se acercaba.<br><br>
            Mateo solo quer√≠a sonre√≠r sin miedo.<br><br>
            Entonces encontr√≥:<br><br>
            <b>LunaLab Dent ‚Äî La ciencia de tu sonrisa.</b><br><br>
            <button class="btn" onclick="goToGame()">Comenzar blanqueamiento ü¶∑‚ú®</button>
        </div>
    </div>

    <!-- juego -->
    <div id="gameView" class="view">
        <div class="centered-column">
            <h2>Blanquea los dientes de Mateo</h2>
            <p>Presiona cada diente hasta que est√© totalmente blanco</p>

            <div id="teethRow" style="display:flex; flex-wrap:wrap; gap:16px; justify-content:center;"></div>

            <div id="progressText"></div>
            <div id="warningText">üëâ A√∫n faltan dientes por blanquear para continuar la historia</div>
        </div>
    </div>

    <!-- final -->
    <div id="endScreen" class="view">
        <div class="centered-column big-text">
            ¬°Felicitaciones! üéÑüòÅ<br><br>
            Mateo lleg√≥ a Navidad con una sonrisa blanca,<br>
            segura y llena de luz.<br><br>
            <b>¬øT√∫ tambi√©n quieres?</b><br><br>
            D√©janos tu nombre y te enviamos descuento por WhatsApp üíö<br><br>
            <input id="phoneInput" type="text" placeholder=" Mateo Sonrisa Perfecta	" style="padding:10px; font-size:var(--fs-text); width:260px; border-radius:10px;">
            <br>
            <button class="btn" onclick="sendWhatsApp()">Recibir descuento üéÅ</button>
        </div>
    </div>

</div>

<script>
function goToStory(){ showView('storyView'); }
function goToGame(){ showView('gameView'); }
function showView(id){
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active-view'));
    document.getElementById(id).classList.add('active-view');
}

/* üîä sonidos */
const s_laser = new Audio("https://assets.mixkit.co/sfx/download/mixkit-player-select-notification-945.wav");
const s_clean = new Audio("https://assets.mixkit.co/sfx/download/mixkit-achievement-bell-600.wav");
const s_win = new Audio("https://assets.mixkit.co/sfx/download/mixkit-audience-light-applause-354.wav");

const TOTAL_TEETH = 6;
const MAX_LEVEL = 3;
let stainLevels = new Array(TOTAL_TEETH).fill(MAX_LEVEL);

function updateToothCard(index){
    const card = document.querySelector(`.tooth-card[data-i="${index}"]`);
    const lvl = stainLevels[index];
    card.querySelector(".tooth-emoji").textContent = ["üòÑ","üòä","üôÇ","üò¨"][lvl];
    card.querySelector(".tooth-status").textContent =
        lvl === 0 ? "Perfecto" :
        lvl === 1 ? "Casi" :
        lvl === 2 ? "Manchado" :
        "Muy manchado";
    card.querySelector(".tooth-level").textContent =
        lvl === 0 ? "" : `Toques restantes: ${lvl}`;
}

function updateProgressText(){
    const cleaned = stainLevels.filter(l => l === 0).length;
    document.getElementById("progressText").textContent =
        `Dientes limpios: ${cleaned}/${TOTAL_TEETH}`;

    if(cleaned === TOTAL_TEETH){
        s_win.play();
        setTimeout(()=>showView('endScreen'),1200);
    }
}

function handleToothClick(i){
    if(stainLevels[i] === 0) return;

    stainLevels[i]--;
    s_laser.play();
    if(stainLevels[i] === 0) s_clean.play();

    updateToothCard(i);
    updateProgressText();
}

function initGame(){
    const row = document.getElementById("teethRow");
    row.innerHTML = "";
    stainLevels = new Array(TOTAL_TEETH).fill(MAX_LEVEL);

    for(let i=0;i<TOTAL_TEETH;i++){
        const d=document.createElement("div");
        d.className="tooth-card";
        d.dataset.i=i;
        d.innerHTML=`
            <div class="tooth-emoji">üò¨</div>
            <div class="tooth-status">Muy manchado</div>
            <div class="tooth-level">Toques restantes: 3</div>
        `;
        d.onclick = ()=>handleToothClick(i);
        row.appendChild(d);
    }
    updateProgressText();
}

document.addEventListener("DOMContentLoaded", initGame);

/* WhatsApp */
function sendWhatsApp(){
    const num = document.getElementById("phoneInput").value.trim();
    if(!num){ alert("Ingresa tu n√∫mero ‚úîÔ∏è"); return; }
    const clinica = "51957277664";
    const msg = encodeURIComponent("Hola, quiero mi descuento especial para blanqueamiento dental ü¶∑‚ú®");
    window.open(`https://wa.me/${clinica}?text=${msg}`, "_blank");
}
</script>

</body>
</html>
