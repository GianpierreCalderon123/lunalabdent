<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>LunaLab Dent ‚Äî La sonrisa de Mateo</title>
<style>
    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        background: #0c1226;
        font-family: 'Verdana', sans-serif;
        color: #ffffff;
        overflow: hidden;
    }

    #screen {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 20px;
    }

    .view {
        display: none;
        width: 100%;
        height: 100%;
    }

    .active-view {
        display: flex;
    }

    .centered-column {
        margin: auto;
        max-width: 900px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .big-text {
        font-size: 22px;
        line-height: 1.5;
        max-width: 800px;
    }

    .btn {
        background: #00b7ff;
        border: none;
        border-radius: 14px;
        font-size: 20px;
        padding: 12px 22px;
        color: white;
        margin-top: 22px;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }
    .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 22px rgba(0,0,0,0.5);
    }

    /* INTRO: imagen de Mateo */
    #introTitle {
        font-size: 26px;
        margin-bottom: 18px;
    }

    #mateoImg {
        width: 260px;
        max-width: 70%;
        border-radius: 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.6);
        margin-bottom: 20px;
    }

    /* PANTALLA DEL JUEGO SIMPLE */
    #whiteningGame {
        width: 100%;
        max-width: 900px;
        margin: auto;
    }

    #whiteningGame h2 {
        font-size: 26px;
        margin-bottom: 10px;
    }

    #whiteningGame p {
        font-size: 16px;
        margin-bottom: 16px;
        opacity: 0.9;
    }

    #teethRow {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 16px;
        margin-top: 10px;
    }

    .tooth-card {
        background: #141b36;
        border-radius: 18px;
        padding: 10px 16px;
        width: 120px;
        min-height: 150px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 8px 20px rgba(0,0,0,0.45);
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    .tooth-card:active {
        transform: scale(0.97);
        box-shadow: 0 4px 10px rgba(0,0,0,0.6);
    }

    .tooth-emoji {
        font-size: 46px;
        margin-bottom: 6px;
    }

    .tooth-status {
        font-size: 16px;
        margin-bottom: 4px;
    }

    .tooth-level {
        font-size: 12px;
        opacity: 0.8;
    }

    .tooth-card.level-3 {
        background: #4b2630;
    }

    .tooth-card.level-2 {
        background: #58452b;
    }

    .tooth-card.level-1 {
        background: #345043;
    }

    .tooth-card.level-0 {
        background: #1b3b5c;
    }

    .tooth-card.level-0 .tooth-status {
        color: #7bed9f;
    }

    #progressText {
        margin-top: 18px;
        font-size: 18px;
    }

    /* RESULTADO FINAL */
    #endScreen .big-text {
        font-size: 22px;
    }

    #phoneBox{
        margin-top: 12px;
    }
    #phoneInput{
        padding: 10px;
        font-size: 18px;
        width: 260px;
        border-radius: 10px;
        border: none;
        text-align: center;
    }
    #discountBtn{
        background: #32ff7e;
        border: none;
        padding: 12px 20px;
        border-radius: 12px;
        font-size: 18px;
        margin-top: 10px;
        cursor: pointer;
        box-shadow: 0 6px 16px rgba(0,0,0,0.4);
    }
</style>
</head>
<body>

<div id="screen">

    <!-- PANTALLA 1: IMAGEN DE MATEO -->
    <div id="introView" class="view active-view">
        <div class="centered-column">
            <h1 id="introTitle">¬øQuieres saber la historia de Mateo?</h1>
            <!-- Imagen inicial que guardaste como img123.jpg -->
            <img id="mateoImg" src="img123.jpg" alt="Mateo t√≠mido tap√°ndose la boca">
            <button class="btn" onclick="goToStory()">S√≠, quiero saberla üëâ</button>
        </div>
    </div>

    <!-- PANTALLA 2: HISTORIA -->
    <div id="storyView" class="view">
        <div class="centered-column big-text" id="story">
            Hab√≠a una vez un ni√±o de 12 a√±os llamado <b>Mateo</b>, muy t√≠mido.<br><br>
            Siempre se tapaba la boca al sonre√≠r‚Ä¶ porque sus dientes ten√≠an manchas amarillas.<br><br>
            Pero este a√±o era especial:<br>
            <b>la cena de Navidad</b> se acercaba.<br><br>
            Iba a ver a su familia‚Ä¶<br>y a una persona especial llamada <b>Luc√≠a</b>.<br><br>
            Mateo solo quer√≠a una cosa:<br>
            <b>sonre√≠r sin miedo.</b><br><br>
            Un d√≠a encontr√≥ un lugar llamado:<br><br>
            <b>LunaLab Dent ‚Äî La ciencia de tu sonrisa.</b><br><br>
            El doctor le explic√≥ que, con un blanqueamiento seguro,<br>
            su sonrisa pod√≠a recuperar todo su brillo.<br><br>
            <button class="btn" onclick="goToGame()">Comenzar blanqueamiento ü¶∑‚ú®</button>
        </div>
    </div>

    <!-- PANTALLA 3: JUEGO SENCILLO DE BLANQUEAMIENTO -->
    <div id="gameView" class="view">
        <div class="centered-column">
            <div id="whiteningGame">
                <h2>Ayuda a Mateo a blanquear su sonrisa</h2>
                <p>
                    Toca o haz clic en cada diente para aplicar luz de blanqueamiento.
                    <br>Cada toque lo hace m√°s blanco. Cuando todos est√©n blancos, ¬°Mateo estar√° listo para Navidad!
                </p>

                <div id="teethRow">
                    <!-- Se rellena desde JavaScript -->
                </div>

                <div id="progressText"></div>

                <button class="btn" style="margin-top:18px;" onclick="goBackToStory()">Volver a la historia</button>
            </div>
        </div>
    </div>

    <!-- PANTALLA 4: FINAL + WHATSAPP -->
    <div id="endScreen" class="view">
        <div class="centered-column big-text">
            ¬°Felicitaciones! üéÑüòÅ<br><br>
            Mateo lleg√≥ a Navidad con una sonrisa blanca,<br>
            segura y llena de luz.<br><br>

            Y ahora pregunto‚Ä¶<br><br>

            <b>¬øT√∫ tambi√©n quieres llegar a una bonita Navidad como Mateo,<br>
            con una sonrisa hermosa y brillante?</b><br><br>

            D√©janos tu nombre y te mandaremos un<br>
            <b>descuento especial por WhatsApp üíö</b><br><br>

            <div id="phoneBox">
                <input id="phoneInput" type="text" placeholder="+51 9xx xxx xxx">
                <br>
                <button id="discountBtn" onclick="sendWhatsApp()">Recibir descuento üéÅ</button>
            </div>
        </div>
    </div>

</div>

<script>
/* ------------ CAMBIO DE PANTALLAS ------------ */
function showView(id) {
    document.querySelectorAll('.view').forEach(v => v.classList.remove('active-view'));
    document.getElementById(id).classList.add('active-view');
}

function goToStory(){
    showView('storyView');
}
function goToGame(){
    showView('gameView');
}
function goBackToStory(){
    showView('storyView');
}
function showEndScreenFromGame(){
    showView('endScreen');
}

/* ------------ WHATSAPP DESCUENTO ------------ */
function sendWhatsApp(){
    let numUsuario = document.getElementById("phoneInput").value.trim();
    if(numUsuario === ""){
        alert("Por favor ingresa tu n√∫mero (ej. +51 9xx xxx xxx).");
        return;
    }

    // N√∫mero fijo de la cl√≠nica (Per√∫): 957 277 664
    const clinicaNumber = "51957277664";

    let msg = encodeURIComponent(
        "Hola, soy " + numUsuario +
        ". Quiero mi descuento especial para blanqueamiento dental en LunaLab Dent ü¶∑‚ú®"
    );

    window.open("https://wa.me/" + clinicaNumber + "?text=" + msg, "_blank");
}

/* ------------ JUEGO SENCILLO: TOCA EL DIENTE ------------ */
const TOTAL_TEETH = 6;
const MAX_LEVEL = 3; // 3 = muy manchado, 0 = blanco perfecto
let stainLevels = new Array(TOTAL_TEETH).fill(MAX_LEVEL);

function getStatusText(level){
    switch(level){
        case 3: return "Muy manchado";
        case 2: return "Menos manchado";
        case 1: return "Casi blanco";
        case 0: return "Blanco perfecto";
        default: return "";
    }
}

function getEmoji(level){
    // Cambiamos ligeramente el emoji seg√∫n limpieza
    if(level === 3) return "üò¨";
    if(level === 2) return "üôÇ";
    if(level === 1) return "üòä";
    return "üòÑ";
}

function updateToothCard(index){
    const card = document.querySelector('.tooth-card[data-index="'+index+'"]');
    const level = stainLevels[index];

    card.classList.remove("level-0","level-1","level-2","level-3");
    card.classList.add("level-" + level);

    card.querySelector('.tooth-status').textContent = getStatusText(level);
    card.querySelector('.tooth-level').textContent = "Toques restantes: " + level;
    card.querySelector('.tooth-emoji').textContent = "ü¶∑ " + getEmoji(level);

    if(level === 0){
        card.style.cursor = "default";
    }
}

function updateProgressText(){
    const cleaned = stainLevels.filter(l => l === 0).length;
    const total = stainLevels.length;
    const progressText = document.getElementById("progressText");

    if(cleaned < total){
        progressText.textContent = "Dientes blancos: " + cleaned + " / " + total;
    } else {
        progressText.textContent = "¬°Todos los dientes est√°n blancos! ‚ú®";
        // peque√±a pausa y luego pantalla final
        setTimeout(() => {
            showEndScreenFromGame();
        }, 900);
    }
}

function handleToothClick(index){
    if(stainLevels[index] === 0) return; // ya est√° limpio

    stainLevels[index] = Math.max(0, stainLevels[index] - 1);
    updateToothCard(index);
    updateProgressText();
}

function initWhiteningGame(){
    const row = document.getElementById("teethRow");
    row.innerHTML = "";
    stainLevels = new Array(TOTAL_TEETH).fill(MAX_LEVEL);

    for(let i=0; i<TOTAL_TEETH; i++){
        const card = document.createElement("div");
        card.className = "tooth-card level-" + MAX_LEVEL;
        card.dataset.index = i;

        card.innerHTML = `
            <div class="tooth-emoji">ü¶∑ ${getEmoji(MAX_LEVEL)}</div>
            <div class="tooth-status">${getStatusText(MAX_LEVEL)}</div>
            <div class="tooth-level">Toques restantes: ${MAX_LEVEL}</div>
        `;

        card.addEventListener("click", () => handleToothClick(i));
        card.addEventListener("touchstart", (e) => {
            e.preventDefault();
            handleToothClick(i);
        }, {passive:false});

        row.appendChild(card);
    }

    updateProgressText();
}

// Inicializa el juego cuando se carga la p√°gina
document.addEventListener("DOMContentLoaded", initWhiteningGame);
</script>

</body>
</html>
